import streamlit as st
import time

# --- MODÃœL VE KÃœTÃœPHANE Ä°Ã‡E AKTARMA ---
# Hata olasÄ±lÄ±ÄŸÄ±na karÅŸÄ±, modÃ¼l iÃ§e aktarmalarÄ± try-except bloÄŸuna alÄ±nmÄ±ÅŸtÄ±r.
try:
    # Bu dosyalarÄ±n (turkish_content.py, english_content.py, math_content.py) app.py ile aynÄ± dizinde olduÄŸundan emin olun.
    from turkish_content import konuyu_bul_tr, soru_cozumu_yap_tr
    from english_content import konuyu_bul_eng, soru_cozumu_yap_eng
    from math_content import konuyu_bul_math, soru_cozumu_yap_math 
except ImportError as e:
    # Bu hata, iÃ§erik dosyalarÄ±nÄ±n henÃ¼z boÅŸ veya eksik olmasÄ±ndan kaynaklanÄ±r. UygulamanÄ±n Ã§alÄ±ÅŸmasÄ±nÄ± engellemez.
    st.warning(f"EÄŸitim Ä°Ã§erik DosyasÄ± UyarÄ±sÄ±: '{e.name}' dosyasÄ± bulunamadÄ± veya iÃ§e aktarÄ±lamadÄ±. Ä°Ã§erik alÄ±namayacak. LÃ¼tfen dosyalarÄ± doldurun.")
    
    # Hata durumunda fonksiyonlarÄ±n boÅŸ tanÄ±mlarÄ±
    def konuyu_bul_tr(konu): return f"Ä°Ã§erik modÃ¼lÃ¼ yÃ¼klenemediÄŸi iÃ§in TÃ¼rkÃ§e '{konu}' konusu bulunamÄ±yor."
    def soru_cozumu_yap_tr(soru): return f"Ä°Ã§erik modÃ¼lÃ¼ yÃ¼klenemediÄŸi iÃ§in TÃ¼rkÃ§e '{konu}' sorusu Ã§Ã¶zÃ¼lemiyor."
    def konuyu_bul_eng(konu): return f"Ä°Ã§erik modÃ¼lÃ¼ yÃ¼klenemediÄŸi iÃ§in Ä°ngilizce '{konu}' konusu bulunamÄ±yor."
    def soru_cozumu_yap_eng(soru): return f"Ä°Ã§erik modÃ¼lÃ¼ yÃ¼klenemediÄŸi iÃ§in Ä°ngilizce '{konu}' sorusu Ã§Ã¶zÃ¼lemiyor."
    def konuyu_bul_math(konu): return f"Ä°Ã§erik modÃ¼lÃ¼ yÃ¼klenemediÄŸi iÃ§in Matematik '{konu}' konusu bulunamÄ±yor."
    def soru_cozumu_yap_math(soru): return f"Ä°Ã§erik modÃ¼lÃ¼ yÃ¼klenemediÄŸi iÃ§in Matematik '{konu}' sorusu Ã§Ã¶zÃ¼lemiyor."


# --- SAYFA VE SÄ°MGE AYARLARI ---
st.set_page_config(
    page_title="EÄŸitim Robotu | Yusuf Efe Åahin",
    layout="wide",
    page_icon="ğŸ“š" 
)

# --- YÃ–NETÄ°CÄ° GÄ°RÄ°ÅÄ° AYARLARI VE OTURUM BAÅLATMA ---
ADMIN_PASSWORD = "123" 
# SIMÃœLASYON KULLANICILARI (Demo Hesaplar: ali/a123, ayse/a456)
MOCK_USERS = [
    {"username": "ali", "email": "ali@okul.com", "password_hash": "a123"},
    {"username": "ayse", "email": "ayse@okul.com", "password_hash": "a456"},
]

# OTURUM DURUMU BAÅLANGIÃ‡ DEÄERLERÄ° (TÃ¼m Hata DÃ¼zeltmeleri YapÄ±ldÄ±)
if 'admin_mode' not in st.session_state:
    st.session_state['admin_mode'] = False
if 'user_logged_in' not in st.session_state:
    st.session_state['user_logged_in'] = False
if 'current_user' not in st.session_state:
    st.session_state['current_user'] = None
if 'show_admin_login' not in st.session_state:
    st.session_state['show_admin_login'] = False
if 'show_user_login' not in st.session_state:
    st.session_state['show_user_login'] = False
if 'show_user_register' not in st.session_state:
    st.session_state['show_user_register'] = False
if 'app_color' not in st.session_state:
    st.session_state['app_color'] = '#1E90FF' 
if 'announcement' not in st.session_state:
    st.session_state['announcement'] = "ğŸ¤– EÄŸitim robotu aktif! Yeni konularÄ± keÅŸfetmeye baÅŸlayÄ±n."
if 'announcement_color' not in st.session_state: 
    st.session_state['announcement_color'] = 'warning' 
if 'registration_allowed' not in st.session_state: 
    st.session_state['registration_allowed'] = True 
if 'user_login_allowed' not in st.session_state: 
    st.session_state['user_
